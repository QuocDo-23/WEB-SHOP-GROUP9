<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="https://i.postimg.cc/26JnYsPT/Logo-Photoroom.png">
    <title>S·∫£n Ph·∫©m - Qu·∫£n L√Ω ƒê√®n</title>
    <link rel="stylesheet" href="../CSS/admin.css">
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <img src="https://i.postimg.cc/26JnYsPT/Logo-Photoroom.png" alt="logo">
                LightAdmin
            </div>
            <a href="../admin/dashboard.html" class="menu-item">
                üìä T·ªïng Quan
            </a>
            <a href="../admin/product_admin.html" class="menu-item active">
                üì¶ S·∫£n Ph·∫©m
            </a>
            <a href="../admin/orders-admin.html" class="menu-item">
                üõí ƒê∆°n H√†ng
            </a>
            <a href="../admin/customers.html" class="menu-item">
                üë• Kh√°ch H√†ng
            </a>
            <a href="../admin/news-admin.html" class="menu-item">
                üì∞ Tin T·ª©c
            </a>
            <a href="../admin/review.html" class="menu-item ">
                ‚≠ê ƒê√°nh Gi√°
            </a>
            <a href="../admin/analytics.html" class="menu-item">
                üìà Th·ªëng K√™
            </a>

            <button type="button" class="logout-btn" onclick="window.location.href='../index.html'">ƒêƒÉng xu·∫•t</button>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>Qu·∫£n L√Ω S·∫£n Ph·∫©m</h1>
                <div class="user-info">
                    <div class="avatar">Q</div>
                    <div>
                        <div style="font-weight: 600;">Admin</div>
                        <div style="font-size: 12px; color: #718096;">Qu·∫£n tr·ªã vi√™n</div>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h2>Danh S√°ch S·∫£n Ph·∫©m</h2>
                    <div class="search-box">
                        <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." id="searchInput">
                        <button class="btn btn-primary" onclick="openModal()">+ Th√™m S·∫£n Ph·∫©m</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>H√¨nh ·∫¢nh</th>
                            <th>S·∫£n Ph·∫©m</th>
                            <th>Danh M·ª•c</th>
                            <th>Gi√°</th>
                            <th>S·ªë L∆∞·ª£ng</th>
                            <th>Tr·∫°ng Th√°i</th>
                            <th>Ch·ª©c NƒÉng</th>
                        </tr>
                    </thead>
                    <tbody id="productTableBody">
                        <tr>
                            <td class="product-img">
                                <img src="https://flexhouse.vn/wp-content/uploads/2023/05/Den-san-vuon-nang-luong-mat-troi-hien-dai-CB3075-15.jpg"
                                    alt="">
                            </td>
                            <td>
                                <div class="products-name">ƒê√®n LED Downlight 7W</div>
                            </td>
                            <td>ƒê√®n LED</td>
                            <td class="cost-products">45,000 VNƒê</td>
                            <td>150</td>
                            <td><span class="badge badge-success">active</span></td>
                            <td>
                                <button class="btn btn-sm btn-edit">S·ª≠a</button>
                                <button class="btn btn-sm btn-delete">X√≥a</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Th√™m S·∫£n Ph·∫©m M·ªõi</h3>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <form id="productForm">
                <!-- Th√¥ng tin c∆° b·∫£n -->
                <div class="form-section">
                    <div class="form-section-title">üìã Th√¥ng Tin C∆° B·∫£n</div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>T√™n S·∫£n Ph·∫©m <span class="required">*</span></label>
                            <input type="text" id="productName" required placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m">
                        </div>
                        <div class="form-group">
                            <label>Danh M·ª•c <span class="required">*</span></label>
                            <select id="productCategory" required>
                                <option value="">Ch·ªçn danh m·ª•c</option>
                                <option value="1">ƒê√®n LED</option>
                                <option value="2">ƒê√®n Trang Tr√≠</option>
                                <option value="3">ƒê√®n C√¥ng Nghi·ªáp</option>
                                <option value="4">Ph·ª• Ki·ªán</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Gi√° (VNƒê) <span class="required">*</span></label>
                            <input type="number" id="productPrice" required min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>S·ªë L∆∞·ª£ng T·ªìn Kho <span class="required">*</span></label>
                            <input type="number" id="productStock" required min="0" value="0" placeholder="0">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Gi·∫£m Gi√°</label>
                            <select id="productDiscount">
                                <option value="">Kh√¥ng gi·∫£m gi√°</option>
                                <option value="1">Gi·∫£m 10%</option>
                                <option value="2">Gi·∫£m 20%</option>
                                <option value="3">Gi·∫£m 30%</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tr·∫°ng Th√°i</label>
                            <select id="productStatus">
                                <option value="active">ƒêang b√°n</option>
                                <option value="inactive">Ng·ª´ng b√°n</option>
                                <option value="out_of_stock">H·∫øt h√†ng</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row full">
                        <div class="form-group">
                            <label>Link H√¨nh ·∫¢nh S·∫£n Ph·∫©m</label>
                            <input type="url" id="imageLink" placeholder="https://example.com/image.jpg"
                                onchange="previewImage()">
                            <div id="imagePreview" class="image-preview empty">
                                Ch∆∞a c√≥ h√¨nh ·∫£nh
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chi ti·∫øt s·∫£n ph·∫©m -->
                <div class="form-section">
                    <div class="form-section-title">üîß Chi Ti·∫øt S·∫£n Ph·∫©m</div>

                    <div class="form-row full">
                        <div class="form-group">
                            <label>M√¥ T·∫£ S·∫£n Ph·∫©m</label>
                            <textarea id="productDescription"
                                placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt v·ªÅ s·∫£n ph·∫©m..."></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Ch·∫•t Li·ªáu</label>
                            <input type="text" id="productMaterial" placeholder="Nh√¥m, Th√©p, Nh·ª±a...">
                        </div>
                        <div class="form-group">
                            <label>ƒêi·ªán √Åp</label>
                            <input type="text" id="productVoltage" placeholder="220V, 12V, USB 5V...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>K√≠ch Th∆∞·ªõc</label>
                            <input type="text" id="productDimension" placeholder="60x60cm, √ò12xH20cm...">
                        </div>
                        <div class="form-group">
                            <label>Lo·∫°i ƒê√®n</label>
                            <input type="text" id="productType" placeholder="·ªêp tr·∫ßn, √¢m tr·∫ßn, tu√Ωp, bulb...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>M√†u S·∫Øc</label>
                            <input type="text" id="productColor" placeholder="Tr·∫Øng 6500K, V√†ng ·∫•m 3000K, RGB...">
                        </div>
                        <div class="form-group">
                            <label>Phong C√°ch</label>
                            <input type="text" id="productStyle" placeholder="Hi·ªán ƒë·∫°i, c·ªï ƒëi·ªÉn, c√¥ng nghi·ªáp...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>B·∫£o H√†nh (Th√°ng)</label>
                            <input type="number" id="productWarranty" min="0" placeholder="12, 24, 36...">
                        </div>
                        <div class="form-group">
                            <!-- Empty for layout -->
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">Th√™m S·∫£n Ph·∫©m</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function openModal() {
            document.getElementById('productModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('productModal').classList.remove('active');
            document.getElementById('productForm').reset();
            document.getElementById('imagePreview').innerHTML = 'Ch∆∞a c√≥ h√¨nh ·∫£nh';
            document.getElementById('imagePreview').classList.add('empty');
        }

        function previewImage() {
            const imageLink = document.getElementById('imageLink').value;
            const preview = document.getElementById('imagePreview');

            if (imageLink) {
                preview.innerHTML = `<img src="${imageLink}" alt="Preview" onerror="this.parentElement.innerHTML='Kh√¥ng th·ªÉ t·∫£i h√¨nh ·∫£nh'; this.parentElement.classList.add('empty')">`;
                preview.classList.remove('empty');
            } else {
                preview.innerHTML = 'Ch∆∞a c√≥ h√¨nh ·∫£nh';
                preview.classList.add('empty');
            }
        }

        document.getElementById('productForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // L·∫•y d·ªØ li·ªáu t·ª´ form
            const productData = {
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: document.getElementById('productPrice').value,
                stock: document.getElementById('productStock').value,
                discount: document.getElementById('productDiscount').value,
                status: document.getElementById('productStatus').value,
                image: document.getElementById('imageLink').value,
                description: document.getElementById('productDescription').value,
                material: document.getElementById('productMaterial').value,
                voltage: document.getElementById('productVoltage').value,
                dimension: document.getElementById('productDimension').value,
                type: document.getElementById('productType').value,
                color: document.getElementById('productColor').value,
                style: document.getElementById('productStyle').value,
                warranty: document.getElementById('productWarranty').value
            };

            console.log('D·ªØ li·ªáu s·∫£n ph·∫©m:', productData);

            // Th√™m s·∫£n ph·∫©m v√†o b·∫£ng
            addProductToTable(productData);

            alert('Th√™m s·∫£n ph·∫©m th√†nh c√¥ng!');
            closeModal();
        });

        function addProductToTable(product) {
            const tbody = document.getElementById('productTableBody');
            const row = document.createElement('tr');

            const categoryNames = {
                '1': 'ƒê√®n LED',
                '2': 'ƒê√®n Trang Tr√≠',
                '3': 'ƒê√®n C√¥ng Nghi·ªáp',
                '4': 'Ph·ª• Ki·ªán'
            };

            const statusBadges = {
                'active': '<span class="badge badge-success">active</span>',
                'inactive': '<span class="badge badge-warning">inactive</span>',
                'out_of_stock': '<span class="badge badge-danger">out_of_stock</span>'
            };

            row.innerHTML = `
                <td class="product-img">
                    <img src="${product.image || 'https://via.placeholder.com/55'}" alt="">
                </td>
                <td>
                    <div class="products-name">${product.name}</div>
                </td>
                <td>${categoryNames[product.category] || 'N/A'}</td>
                <td class="cost-products">${parseInt(product.price).toLocaleString('vi-VN')} VNƒê</td>
                <td>${product.stock}</td>
                <td>${statusBadges[product.status]}</td>
                <td>
                    <button class="btn btn-sm btn-edit">S·ª≠a</button>
                    <button class="btn btn-sm btn-delete" onclick="this.closest('tr').remove()">X√≥a</button>
                </td>
            `;

            tbody.insertBefore(row, tbody.firstChild);
        }

        // T√¨m ki·∫øm s·∫£n ph·∫©m
        document.getElementById('searchInput').addEventListener('input', function (e) {
            const searchText = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#productTableBody tr');

            rows.forEach(row => {
                const productName = row.querySelector('.products-name').textContent.toLowerCase();
                if (productName.includes(searchText)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });

        // ƒê√≥ng modal khi click b√™n ngo√†i
        document.getElementById('productModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>

</html>